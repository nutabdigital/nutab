(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9947],{9947:function(e,t,r){"use strict";let n,i,a,o,u;r.r(t);var c=r(7437),l=r(2265);r(5313);var s=r(8296);let d={angleX:0,angleY:0},f=50,h=(e,t)=>{let r=!1;return function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];r||(e.apply(this,i),r=!0,setTimeout(()=>{r=!1},t))}};t.default=()=>{let{state:e,paused:t}=(0,s.l)(),[m,w]=(0,l.useState)(e.current.currentSection);(0,l.useEffect)(()=>{let t=setInterval(()=>{m!==e.current.currentSection&&w(e.current.currentSection)},50);return()=>clearInterval(t)},[e,m]);let p=(0,l.useRef)(null),[g,v]=(0,l.useState)(!1),M=(0,l.useRef)(0),y=(0,l.useRef)(1),S=(0,l.useRef)(null),A=(0,l.useRef)(null),b=(0,l.useRef)(null),[E,R]=(0,l.useState)(!1),Y=(0,l.useRef)(0),x=(0,l.useRef)([]);(0,l.useRef)(0);let F=(0,l.useRef)(!1),P=(0,l.useRef)(!1),k=()=>{let e=A.current;e&&(n=new e.Scene,(i=new e.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3)).position.z=g?85:50,(a=new e.WebGLRenderer({canvas:p.current,alpha:!0})).setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio||1,2)))},z=()=>{let e=A.current;if(!e)return;let t=!!(window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches);F.current=t;let r=navigator.deviceMemory||4,i=navigator.hardwareConcurrency||4,a=window.innerWidth<700;v(a);let u=r<=2||i<=2;P.current=u;let c=1e4,l=.25;if(t||u||a?(c=5e3,l=.5):r<=4?(c=7e3,l=.3):(c=15e3,l=.2),Y.current=c,o){try{o.geometry&&o.geometry.dispose(),o.material&&o.material.dispose(),n.remove(o)}catch(e){}o=null}let s=Array(c).fill(null).map(()=>({theta:Math.random()*Math.PI*2,phi:Math.acos(2*Math.random()-1)}));x.current=s;let d=new e.BufferGeometry,f=new Float32Array(3*c),h=new Float32Array(3*c);for(let e=0;e<c;e++){let{theta:t,phi:r}=s[e],n=30*Math.sin(r)*Math.cos(t),i=30*Math.sin(r)*Math.sin(t),a=30*Math.cos(r),o=3*e;f[o]=n,f[o+1]=i,f[o+2]=a,h[o]=.5,h[o+1]=.5,h[o+2]=.5}d.setAttribute("position",new e.BufferAttribute(f,3)),d.setAttribute("color",new e.BufferAttribute(h,3));let m=new e.PointsMaterial({vertexColors:!0,size:t?.8*l:l});o=new e.Points(d,m),n.add(o)},L=t=>{let r=b.current;if(r&&2===e.current.currentSection){S.current&&S.current.kill(),S.current=r.timeline();let e=M.current+2*y.current;e>=20?(e=20,y.current=-1):e<=0&&(e=0,y.current=1);let t=d.angleY+.4;S.current.to(M,{current:e,duration:1.5,ease:"power2.out"}).to(d,{angleY:t,duration:2.5,ease:"power2.out"},"<")}},X=e=>{1===e.touches.length&&e.touches[0].clientY},C=t=>{let r=b.current;if(r&&(t.touches[0].clientY,2===e.current.currentSection)){S.current&&S.current.kill(),S.current=r.timeline();let e=M.current+2*y.current;e>=20?(e=20,y.current=-1):e<=0&&(e=0,y.current=1);let t=d.angleY+.4;S.current.to(M,{current:e,duration:1.5,ease:"power2.out"}).to(d,{angleY:t,duration:2.5,ease:"power2.out"},"<")}},W=()=>{},q=()=>{if(!o)return;let e=A.current;if(!e)return;let t=o.geometry.attributes.position.array,r=o.geometry.attributes.color.array,n=Y.current,i=x.current;for(let a=0;a<n;a++){let n=3*a,{theta:o,phi:u}=i[a],c=20+5*Math.sin(M.current*u+o);t[n]=c*Math.sin(u)*Math.cos(o),t[n+1]=c*Math.sin(u)*Math.sin(o),t[n+2]=c*Math.cos(u);let l=(Math.sqrt(t[n]**2+t[n+1]**2+t[n+2]**2)- -30)/60,s=new e.Color;s.setHSL(.7*l,1,.4),r[n]=s.r,r[n+1]=s.g,r[n+2]=s.b}o.geometry.attributes.position.needsUpdate=!0,o.geometry.attributes.color.needsUpdate=!0},H=()=>{i&&(i.position.x=f*Math.sin(d.angleX),i.position.y=f*Math.sin(d.angleY),i.position.z=f*Math.cos(d.angleX)*Math.cos(d.angleY),i.lookAt(0,0,0))},N=e=>{window.removeEventListener("resize",e),a&&a.dispose&&a.dispose()};(0,l.useEffect)(()=>{let e=!1;return(async()=>{try{let[t,n]=await Promise.all([r.e(6689).then(r.bind(r,1448)),Promise.all([r.e(922),r.e(6498)]).then(r.bind(r,6498))]);if(e)return;A.current=t,b.current=n&&(n.gsap||n.default||n),R(!0)}catch(e){console.error("Failed to load 3D libs:",e)}})(),()=>{e=!0}},[]),(0,l.useEffect)(()=>{if(E)return k(),z(),W(),_(),window.addEventListener("resize",_),()=>{N(_)}},[E]),(0,l.useEffect)(()=>{if(!E)return;let e=b.current;e&&(u=g?85:1===m||2===m||4===m?35:60,e.to({value:f},{value:u,duration:1,ease:"expo.inOut",onUpdate:function(){f=this.targets()[0].value,i&&(i.position.x=f*Math.sin(d.angleX),i.position.y=f*Math.sin(d.angleY),i.position.z=f*Math.cos(d.angleX)*Math.cos(d.angleY),i.lookAt(0,0,0))}}))},[g,e.current.currentSection,E]),(0,l.useEffect)(()=>{let t;if(!E)return;let r=performance.now(),n=i=>{let a=(i-r)/1e3;r=i;let o=60*a;2!==e.current.currentSection?(d.angleX+=.0047*o,d.angleY+=.0047*o,M.current+=.02*y.current*o):(d.angleX+=7e-4*o,d.angleY+=7e-4*o,M.current+=.0014*y.current*o),M.current>=20?(M.current=20,y.current=-1):M.current<=0&&(M.current=0,y.current=1),t=requestAnimationFrame(n)};return t=requestAnimationFrame(n),()=>cancelAnimationFrame(t)},[e.current.currentSection,E]),(0,l.useEffect)(()=>{if(!E)return;let t=h(e=>{L(e)},100),r=h(e=>{X(e),C(e)},100);return 2===e.current.currentSection&&(document.addEventListener("wheel",t,{passive:!0}),document.addEventListener("touchmove",r,{passive:!0})),()=>{document.removeEventListener("wheel",t),document.removeEventListener("touchmove",r)}},[e.current.currentSection,E]),(0,l.useEffect)(()=>{let e;if(!E)return;performance.now();let r=o=>{F.current?!t&&a&&n&&i&&a.render(n,i):!t&&(q(),H(),a&&n&&i&&a.render(n,i)),e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>cancelAnimationFrame(e)},[t,E]);let _=h(()=>{v(window.innerWidth<600);let e=window.innerWidth,t=window.innerHeight;a&&i&&(a.setSize(e,t),i.aspect=e/t,i.updateProjectionMatrix())},100);return(0,c.jsx)("div",{className:"model-container",style:{transform:"translateX(".concat(g||1===m||2===m||4===m?"0%":"left"==(m%2==0?"left":"right")?"-50%":"50%",")")},children:(0,c.jsx)("canvas",{ref:p,className:"model ".concat(E?"model-ready":"model-loading"),"aria-hidden":"true"})})}},5313:function(){}}]);